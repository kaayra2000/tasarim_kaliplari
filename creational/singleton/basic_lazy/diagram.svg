<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="783px" preserveAspectRatio="none" style="width:477px;height:783px;" version="1.1" viewBox="0 0 477 783" width="477px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="388" x="47.5" y="19.2419">Basit (Lazy) Singleton Pattern - Thread-Unsafe</text><!--MD5=[248f897e4bb16c2722904b15df30346f]
class Logger--><rect fill="#FFE8CC" height="186.5433" id="Logger" style="stroke: #CC8800; stroke-width: 1.5;" width="206" x="18.5" y="32.5158"/><ellipse cx="88.25" cy="53.86" fill="#ADD1B2" rx="11" ry="11" style="stroke: #CC8800; stroke-width: 1.0;"/><path d="M91.2188,59.5006 Q90.6406,59.7975 90,59.9381 Q89.3594,60.0943 88.6563,60.0943 Q86.1563,60.0943 84.8281,58.4537 Q83.5156,56.7975 83.5156,53.6725 Q83.5156,50.5475 84.8281,48.8912 Q86.1563,47.235 88.6563,47.235 Q89.3594,47.235 90,47.3912 Q90.6563,47.5475 91.2188,47.8443 L91.2188,50.5631 Q90.5938,49.985 90,49.7193 Q89.4063,49.4381 88.7813,49.4381 Q87.4375,49.4381 86.75,50.5162 Q86.0625,51.5787 86.0625,53.6725 Q86.0625,55.7662 86.75,56.8443 Q87.4375,57.9068 88.7813,57.9068 Q89.4063,57.9068 90,57.6412 Q90.5938,57.36 91.2188,56.7818 L91.2188,59.5006 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="62" x="106.75" y="50.3439">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="39" x="118.25" y="66.6881">Logger</text><line style="stroke: #CC8800; stroke-width: 1.5;" x1="19.5" x2="223.5" y1="75.2041" y2="75.2041"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="26.5" y="83.2041"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="157" x="38.5" y="90.963">instance: unique_ptr&lt;Logger&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="26.5" y="98.186"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="38.5" y="105.9449">prefix: string</text><line style="stroke: #CC8800; stroke-width: 1.5;" x1="19.5" x2="223.5" y1="113.1679" y2="113.1679"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="26.5" y="121.1679"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="38.5" y="128.9268">Logger()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="26.5" y="136.1497"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="38.5" y="143.9087">Logger(const Logger&amp;) = delete</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="26.5" y="151.1316"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="38.5" y="158.8905">operator=(const Logger&amp;) = delete</text><line style="stroke: #CC8800; stroke-width: 1.5;" x1="19.5" x2="223.5" y1="166.1135" y2="166.1135"/><ellipse cx="29.5" cy="177.1135" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="117" x="38.5" y="181.8724">getInstance(): Logger*</text><ellipse cx="29.5" cy="192.0954" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="38.5" y="196.8543">setPrefix(p: string): void</text><ellipse cx="29.5" cy="207.0773" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="38.5" y="211.8362">log(msg: string): void</text><path d="M260,80.5158 L260,116.9279 L195.5,86.695 L260,124.9279 L260,161.3399 A0,0 0 0 0 260,161.3399 L465,161.3399 A0,0 0 0 0 465,161.3399 L465,90.5158 L455,80.5158 L260,80.5158 A0,0 0 0 0 260,80.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M455,80.5158 L455,90.5158 L465,90.5158 L455,80.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="266" y="99.4129">Statik Alan:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="266" y="117.1189">• nullptr ile başlatılır</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="266" y="134.8249">• İlk erişimde oluşturulur</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="266" y="152.5309">• unique_ptr ile bellek yönetimi</text><path d="M6,279.5158 L6,749.8723 A0,0 0 0 0 6,749.8723 L237,749.8723 A0,0 0 0 0 237,749.8723 L237,289.5158 L227,279.5158 L125.5,279.5158 L121.5,219.5958 L117.5,279.5158 L6,279.5158 A0,0 0 0 0 6,279.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M227,279.5158 L227,289.5158 L237,289.5158 L227,279.5158 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="12" y="298.4129">⚠️</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="27" y="298.4129">Thread Safety Problemi:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="15" y="316.1189"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="12" y="333.8249">Yarış Durumu:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="12" y="351.5309">```cpp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="12" y="369.2369">if (!instance) {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="24" y="386.9429">// Thread 1 ve Thread 2 aynı anda</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="24" y="404.649">// buraya girebilir!</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="24" y="422.355">instance = new Logger();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="12" y="440.061">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="12" y="457.767">```</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="15" y="475.473"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="12" y="493.179">Sonuç:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="12" y="510.8851">• İki farklı instance oluşabilir</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="12" y="528.5911">• Bellek sızıntısı riski</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="12" y="546.2971">• Singleton garantisi bozulur</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="15" y="564.0031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="12" y="581.7091">❌</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="25" y="581.7091">Zararlar:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="12" y="599.4151">• Thread-safe değil</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="12" y="617.1212">• Race condition riski</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="12" y="634.8272">• Çoklu thread için uygun değil</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="15" y="652.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="12" y="670.2392">✅</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="26" y="670.2392">Faydalar:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="12" y="687.9452">• Basit uygulama</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="12" y="705.6512">• Lazy initialization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="12" y="723.3573">• Tek thread için yeterli</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="12" y="741.0633">• Az kod</text><!--MD5=[bbeb3f326363ce957e5fc8a2d52efbe8]
link Logger to Logger$$$RIGHT--><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="315" x="84" y="770.2058">Oluşturulma: 17.10.2025 | Sürüm: 1.0.0 | Pattern: Lazy Singleton</text><!--MD5=[e3bb952cccd447b666265cab47de1551]
@startuml

title Basit (Lazy) Singleton Pattern - Thread-Unsafe

skinparam backgroundColor #FFFFFF
skinparam shadowing false

skinparam class {
    BackgroundColor #FFE8CC
    BorderColor #CC8800
    ArrowColor #CC8800
}

class Logger <<Singleton>> {
    - {static} instance: unique_ptr<Logger>
    - prefix: string
    __
    - Logger()
    - Logger(const Logger&) = delete
    - operator=(const Logger&) = delete
    __
    + {static} getInstance(): Logger*
    + setPrefix(p: string): void
    + log(msg: string): void
}

note right of Logger::instance
  **Statik Alan:**
  • nullptr ile başlatılır
  • İlk erişimde oluşturulur
  • unique_ptr ile bellek yönetimi
end note

note bottom of Logger
  ⚠️ **Thread Safety Problemi:**
  
  **Yarış Durumu:**
  ```cpp
  if (!instance) {
      // Thread 1 ve Thread 2 aynı anda
      // buraya girebilir!
      instance = new Logger();
  }
  ```
  
  **Sonuç:**
  • İki farklı instance oluşabilir
  • Bellek sızıntısı riski
  • Singleton garantisi bozulur
  
  ❌ **Zararlar:**
  • Thread-safe değil
  • Race condition riski
  • Çoklu thread için uygun değil
  
  ✅ **Faydalar:**
  • Basit uygulama
  • Lazy initialization
  • Tek thread için yeterli
  • Az kod
end note

footer Oluşturulma: 17.10.2025 | Sürüm: 1.0.0 | Pattern: Lazy Singleton

@enduml

PlantUML version 1.2020.02(Sun Mar 01 13:22:07 TRT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.8+9-Ubuntu-0ubuntu124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>